#! /bin/bash
FILES='searchtermtrying.lst searchtermtrying2.lst'
cat ${FILES} | grep -vP '^\s*$|^#' | perl -MURI::Encode -nle 'print URI::Encode::uri_encode($_,{encode_reserved=>1})' | sed 's/%20/+/g'

#reading search terms from command line, files or stdin :
if [ "${SEARCH_TERM}" = "" ]
then 
    cat "$@"
else
    echo "${SEARCH_TERM}"
    if [ $# -gt 0 ]
        then
            cat "$@"
        fi
fi \
| grep -vP '^\s*$|^#' \
| if [ $URLENCODE  = true ]
then
    perl -MURI::Encode -nle 'print URI::Encode::uri_encode($_,{encode_reserved=>1})'
else
    cat "$@"
fi \
| sed 's/%20/+/g' \
| while read TERM
do
    echo curl -sSL 'http....${TERM}'
done
